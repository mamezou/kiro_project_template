---
name: update-docs
description: 実装完了後にドキュメントを一括最新化する。README、設計書、実装計画書、チュートリアル等の更新時に使用する。「ドキュメント更新」「docs 更新」「README 更新」等のリクエストで発動。
---

# ドキュメント一括最新化スキル

機能の実装完了後、関連するすべてのドキュメントを最新の状態に更新する。

## 前提

このスキルはプロジェクトに以下のようなドキュメント構成があることを前提とする。
存在しないファイルはスキップする。

```
docs/
├── design/          # 設計書
├── impl/            # 実装計画書
├── TUTORIAL.md      # チュートリアル（日本語）
└── *.md             # その他ドキュメント
README.md            # プロジェクトREADME（英語）
```

## Phase 1: 変更内容の把握

以下のコマンドで直近の変更を確認する:

```bash
git diff HEAD~5 --name-only
git log --oneline -10
```

変更されたソースファイルから、どの機能が実装・変更されたかを特定する。

## Phase 2: 開発ドキュメントの更新

### 設計書 (`docs/design/`)

該当する設計書が存在する場合:

- 実装ステータスを更新（`> **✅ 実装完了** (YYYY-MM-DD)`）
- API仕様を実装に合わせて修正
- 比較表があれば実装済み項目を更新

存在しない場合は既存の設計書フォーマットに従って新規作成する。

### 実装計画書 (`docs/impl/`)

- 完了済みフェーズのステータスを更新
- ファイル構成を実際のコードと一致させる

## Phase 3: README.md の更新

- 言語: **英語**
- 新しいAPIがあれば API Reference セクションに追加
- 型定義を `src/` のソースコードと一致させる
- コード例が最新APIで動作するか確認

APIリファレンスの記述フォーマット:

````markdown
### API名

```typescript
kt.api_name(param1: Type1, param2?: Type2): ReturnType
```

| Parameter | Type | Default | Description |
|-----------|------|---------|-------------|
| param1 | `Type1` | - | Description |
````

## Phase 4: チュートリアルの更新

- 言語: **日本語**（です・ます調）
- 既存セクションのコード例を最新APIに合わせて修正
- 新しいAPIカテゴリがあればセクションを追加
- 目次を更新
- コード例は完全に動作するものにする

## Phase 5: 一貫性チェック

すべてのドキュメント更新後に確認:

1. エクスポートされている全APIがREADMEに記載されているか
2. パラメータのデフォルト値がソースコードと一致しているか
3. 型名がソースコードの型定義と一致しているか
4. 設計書と実装計画書のステータスが矛盾していないか
5. ファイルパスの参照が実際のコードと一致すること

## 記述ルール

- `README.md` は**英語**
- `docs/` 配下は**日本語**
- コード例は TypeScript
- 不要になった設計書は `docs/archive/` に移動
